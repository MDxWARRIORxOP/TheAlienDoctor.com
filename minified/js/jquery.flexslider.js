/*
 * jQuery FlexSlider v2.1
 * http://www.woothemes.com/flexslider/
 *
 * Copyright 2012 WooThemes
 * Free to use under the GPLv2 license.
 * http://www.gnu.org/licenses/gpl-2.0.html
 *
 * Contributing author: Tyler Smith (@mbmufffin)
 */

(function(e){e.flexslider=function(l,w){var a=e(l),c=e.extend({},e.flexslider.defaults,w),g=c.namespace,x="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,z=x?"touchend":"click",q="vertical"===c.direction,p=c.reverse,m=0<c.itemWidth,v="fade"===c.animation,y=""!==c.asNavFor,h={};e.data(l,"flexslider",a);h={init:function(){a.animating=!1;a.currentSlide=c.startAt;a.animatingTo=a.currentSlide;a.atEnd=0===a.currentSlide||a.currentSlide===a.last;a.containerSelector=c.selector.substr(0,
  c.selector.search(" "));a.slides=e(c.selector,a);a.container=e(a.containerSelector,a);a.count=a.slides.length;a.syncExists=0<e(c.sync).length;"slide"===c.animation&&(c.animation="swing");a.prop=q?"top":"marginLeft";a.args={};a.manualPause=!1;a.transitions=!c.video&&!v&&c.useCSS&&function(){var b=document.createElement("div"),d=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"],f;for(f in d)if(void 0!==b.style[d[f]])return a.pfx=d[f].replace("Perspective","").toLowerCase(),
  a.prop="-"+a.pfx+"-transform",!0;return!1}();""!==c.controlsContainer&&(a.controlsContainer=0<e(c.controlsContainer).length&&e(c.controlsContainer));""!==c.manualControls&&(a.manualControls=0<e(c.manualControls).length&&e(c.manualControls));c.randomize&&(a.slides.sort(function(){return Math.round(Math.random())-.5}),a.container.empty().append(a.slides));a.doMath();y&&h.asNav.setup();a.setup("init");c.controlNav&&h.controlNav.setup();c.directionNav&&h.directionNav.setup();c.keyboard&&(1===e(a.containerSelector).length||
  c.multipleKeyboard)&&e(document).bind("keyup",function(b){b=b.keyCode;a.animating||39!==b&&37!==b||(b=39===b?a.getTarget("next"):37===b?a.getTarget("prev"):!1,a.flexAnimate(b,c.pauseOnAction))});c.mousewheel&&a.bind("mousewheel",function(b,d,f,k){b.preventDefault();b=0>d?a.getTarget("next"):a.getTarget("prev");a.flexAnimate(b,c.pauseOnAction)});c.pausePlay&&h.pausePlay.setup();c.slideshow&&(c.pauseOnHover&&a.hover(function(){a.manualPlay||a.manualPause||a.pause()},function(){a.manualPause||a.manualPlay||
  a.play()}),0<c.initDelay?setTimeout(a.play,c.initDelay):a.play());x&&c.touch&&h.touch();(!v||v&&c.smoothHeight)&&e(window).bind("resize focus",h.resize);setTimeout(function(){c.start(a)},200)},asNav:{setup:function(){a.asNav=!0;a.animatingTo=Math.floor(a.currentSlide/a.move);a.currentItem=a.currentSlide;a.slides.removeClass(g+"active-slide").eq(a.currentItem).addClass(g+"active-slide");a.slides.click(function(b){b.preventDefault();b=e(this);var d=b.index();e(c.asNavFor).data("flexslider").animating||
  b.hasClass("active")||(a.direction=a.currentItem<d?"next":"prev",a.flexAnimate(d,c.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){a.manualControls?h.controlNav.setupManual():h.controlNav.setupPaging()},setupPaging:function(){var b=1;a.controlNavScaffold=e('<ol class="'+g+"control-nav "+g+("thumbnails"===c.controlNav?"control-thumbs":"control-paging")+'"></ol>');if(1<a.pagingCount)for(var d=0;d<a.pagingCount;d++){var f="thumbnails"===c.controlNav?'<img src="'+a.slides.eq(d).attr("data-thumb")+
  '"/>':"<a>"+b+"</a>";a.controlNavScaffold.append("<li>"+f+"</li>");b++}a.controlsContainer?e(a.controlsContainer).append(a.controlNavScaffold):a.append(a.controlNavScaffold);h.controlNav.set();h.controlNav.active();a.controlNavScaffold.delegate("a, img",z,function(k){k.preventDefault();k=e(this);var r=a.controlNav.index(k);k.hasClass(g+"active")||(a.direction=r>a.currentSlide?"next":"prev",a.flexAnimate(r,c.pauseOnAction))});x&&a.controlNavScaffold.delegate("a","click touchstart",function(k){k.preventDefault()})},
  setupManual:function(){a.controlNav=a.manualControls;h.controlNav.active();a.controlNav.live(z,function(b){b.preventDefault();b=e(this);var d=a.controlNav.index(b);b.hasClass(g+"active")||(d>a.currentSlide?a.direction="next":a.direction="prev",a.flexAnimate(d,c.pauseOnAction))});x&&a.controlNav.live("click touchstart",function(b){b.preventDefault()})},set:function(){a.controlNav=e("."+g+"control-nav li "+("thumbnails"===c.controlNav?"img":"a"),a.controlsContainer?a.controlsContainer:a)},active:function(){a.controlNav.removeClass(g+
  "active").eq(a.animatingTo).addClass(g+"active")},update:function(b,d){1<a.pagingCount&&"add"===b?a.controlNavScaffold.append(e("<li><a>"+a.count+"</a></li>")):1===a.pagingCount?a.controlNavScaffold.find("li").remove():a.controlNav.eq(d).closest("li").remove();h.controlNav.set();1<a.pagingCount&&a.pagingCount!==a.controlNav.length?a.update(d,b):h.controlNav.active()}},directionNav:{setup:function(){var b=e('<ul class="'+g+'direction-nav"><li><a class="'+g+'prev" href="#">'+c.prevText+'</a></li><li><a class="'+
  g+'next" href="#">'+c.nextText+"</a></li></ul>");a.controlsContainer?(e(a.controlsContainer).append(b),a.directionNav=e("."+g+"direction-nav li a",a.controlsContainer)):(a.append(b),a.directionNav=e("."+g+"direction-nav li a",a));h.directionNav.update();a.directionNav.bind(z,function(d){d.preventDefault();d=e(this).hasClass(g+"next")?a.getTarget("next"):a.getTarget("prev");a.flexAnimate(d,c.pauseOnAction)});x&&a.directionNav.bind("click touchstart",function(d){d.preventDefault()})},update:function(){var b=
  g+"disabled";1===a.pagingCount?a.directionNav.addClass(b):c.animationLoop?a.directionNav.removeClass(b):0===a.animatingTo?a.directionNav.removeClass(b).filter("."+g+"prev").addClass(b):a.animatingTo===a.last?a.directionNav.removeClass(b).filter("."+g+"next").addClass(b):a.directionNav.removeClass(b)}},pausePlay:{setup:function(){var b=e('<div class="'+g+'pauseplay"><a></a></div>');a.controlsContainer?(a.controlsContainer.append(b),a.pausePlay=e("."+g+"pauseplay a",a.controlsContainer)):(a.append(b),
  a.pausePlay=e("."+g+"pauseplay a",a));h.pausePlay.update(c.slideshow?g+"pause":g+"play");a.pausePlay.bind(z,function(d){d.preventDefault();e(this).hasClass(g+"pause")?(a.manualPause=!0,a.manualPlay=!1,a.pause()):(a.manualPause=!1,a.manualPlay=!0,a.play())});x&&a.pausePlay.bind("click touchstart",function(d){d.preventDefault()})},update:function(b){"play"===b?a.pausePlay.removeClass(g+"pause").addClass(g+"play").text(c.playText):a.pausePlay.removeClass(g+"play").addClass(g+"pause").text(c.pauseText)}},
  touch:function(){function b(n){t=q?f-n.touches[0].pageY:f-n.touches[0].pageX;A=q?Math.abs(t)<Math.abs(n.touches[0].pageX-k):Math.abs(t)<Math.abs(n.touches[0].pageY-k);if(!A||500<Number(new Date)-B)n.preventDefault(),!v&&a.transitions&&(c.animationLoop||(t/=0===a.currentSlide&&0>t||a.currentSlide===a.last&&0<t?Math.abs(t)/u+2:1),a.setProps(r+t,"setTouch"))}function d(n){l.removeEventListener("touchmove",b,!1);if(a.animatingTo===a.currentSlide&&!A&&null!==t){n=p?-t:t;var C=0<n?a.getTarget("next"):a.getTarget("prev");
  a.canAdvance(C)&&(550>Number(new Date)-B&&50<Math.abs(n)||Math.abs(n)>u/2)?a.flexAnimate(C,c.pauseOnAction):v||a.flexAnimate(a.currentSlide,c.pauseOnAction,!0)}l.removeEventListener("touchend",d,!1);r=t=k=f=null}var f,k,r,u,t,B,A=!1;l.addEventListener("touchstart",function(n){a.animating?n.preventDefault():1===n.touches.length&&(a.pause(),u=q?a.h:a.w,B=Number(new Date),r=m&&p&&a.animatingTo===a.last?0:m&&p?a.limit-(a.itemW+c.itemMargin)*a.move*a.animatingTo:m&&a.currentSlide===a.last?a.limit:m?(a.itemW+
  c.itemMargin)*a.move*a.currentSlide:p?(a.last-a.currentSlide+a.cloneOffset)*u:(a.currentSlide+a.cloneOffset)*u,f=q?n.touches[0].pageY:n.touches[0].pageX,k=q?n.touches[0].pageX:n.touches[0].pageY,l.addEventListener("touchmove",b,!1),l.addEventListener("touchend",d,!1))},!1)},resize:function(){!a.animating&&a.is(":visible")&&(m||a.doMath(),v?h.smoothHeight():m?(a.slides.width(a.computedW),a.update(a.pagingCount),a.setProps()):q?(a.viewport.height(a.h),a.setProps(a.h,"setTotal")):(c.smoothHeight&&h.smoothHeight(),
  a.newSlides.width(a.computedW),a.setProps(a.computedW,"setTotal")))},smoothHeight:function(b){if(!q||v){var d=v?a:a.viewport;b?d.animate({height:a.slides.eq(a.animatingTo).height()},b):d.height(a.slides.eq(a.animatingTo).height())}},sync:function(b){var d=e(c.sync).data("flexslider"),f=a.animatingTo;switch(b){case "animate":d.flexAnimate(f,c.pauseOnAction,!1,!0);break;case "play":d.playing||d.asNav||d.play();break;case "pause":d.pause()}}};a.flexAnimate=function(b,d,f,k,r){y&&1===a.pagingCount&&(a.direction=
  a.currentItem<b?"next":"prev");if(!a.animating&&(a.canAdvance(b,r)||f)&&a.is(":visible")){if(y&&k)if(f=e(c.asNavFor).data("flexslider"),a.atEnd=0===b||b===a.count-1,f.flexAnimate(b,!0,!1,!0,r),a.direction=a.currentItem<b?"next":"prev",f.direction=a.direction,Math.ceil((b+1)/a.visible)-1!==a.currentSlide&&0!==b)a.currentItem=b,a.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),b=Math.floor(b/a.visible);else return a.currentItem=b,a.slides.removeClass(g+"active-slide").eq(b).addClass(g+
  "active-slide"),!1;a.animating=!0;a.animatingTo=b;c.before(a);d&&a.pause();a.syncExists&&!r&&h.sync("animate");c.controlNav&&h.controlNav.active();m||a.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide");a.atEnd=0===b||b===a.last;c.directionNav&&h.directionNav.update();b===a.last&&(c.end(a),c.animationLoop||a.pause());if(v)x?(a.slides.eq(a.currentSlide).css({opacity:0,zIndex:1}),a.slides.eq(b).css({opacity:1,zIndex:2}),a.slides.unbind("webkitTransitionEnd transitionend"),a.slides.eq(a.currentSlide).bind("webkitTransitionEnd transitionend",
  function(){c.after(a)}),a.animating=!1,a.currentSlide=a.animatingTo):(a.slides.eq(a.currentSlide).fadeOut(c.animationSpeed,c.easing),a.slides.eq(b).fadeIn(c.animationSpeed,c.easing,a.wrapup));else{var u=q?a.slides.filter(":first").height():a.computedW;m?(b=c.itemWidth>a.w?2*c.itemMargin:c.itemMargin,b=(a.itemW+b)*a.move*a.animatingTo,b=b>a.limit&&1!==a.visible?a.limit:b):b=0===a.currentSlide&&b===a.count-1&&c.animationLoop&&"next"!==a.direction?p?(a.count+a.cloneOffset)*u:0:a.currentSlide===a.last&&
  0===b&&c.animationLoop&&"prev"!==a.direction?p?0:(a.count+1)*u:p?(a.count-1-b+a.cloneOffset)*u:(b+a.cloneOffset)*u;a.setProps(b,"",c.animationSpeed);a.transitions?(c.animationLoop&&a.atEnd||(a.animating=!1,a.currentSlide=a.animatingTo),a.container.unbind("webkitTransitionEnd transitionend"),a.container.bind("webkitTransitionEnd transitionend",function(){a.wrapup(u)})):a.container.animate(a.args,c.animationSpeed,c.easing,function(){a.wrapup(u)})}c.smoothHeight&&h.smoothHeight(c.animationSpeed)}};a.wrapup=
  function(b){v||m||(0===a.currentSlide&&a.animatingTo===a.last&&c.animationLoop?a.setProps(b,"jumpEnd"):a.currentSlide===a.last&&0===a.animatingTo&&c.animationLoop&&a.setProps(b,"jumpStart"));a.animating=!1;a.currentSlide=a.animatingTo;c.after(a)};a.animateSlides=function(){a.animating||a.flexAnimate(a.getTarget("next"))};a.pause=function(){clearInterval(a.animatedSlides);a.playing=!1;c.pausePlay&&h.pausePlay.update("play");a.syncExists&&h.sync("pause")};a.play=function(){a.animatedSlides=setInterval(a.animateSlides,
  c.slideshowSpeed);a.playing=!0;c.pausePlay&&h.pausePlay.update("pause");a.syncExists&&h.sync("play")};a.canAdvance=function(b,d){var f=y?a.pagingCount-1:a.last;return d?!0:y&&a.currentItem===a.count-1&&0===b&&"prev"===a.direction?!0:y&&0===a.currentItem&&b===a.pagingCount-1&&"next"!==a.direction?!1:b!==a.currentSlide||y?c.animationLoop?!0:a.atEnd&&0===a.currentSlide&&b===f&&"next"!==a.direction?!1:a.atEnd&&a.currentSlide===f&&0===b&&"next"===a.direction?!1:!0:!1};a.getTarget=function(b){a.direction=
  b;return"next"===b?a.currentSlide===a.last?0:a.currentSlide+1:0===a.currentSlide?a.last:a.currentSlide-1};a.setProps=function(b,d,f){var k=function(){var r=b?b:(a.itemW+c.itemMargin)*a.move*a.animatingTo;return-1*function(){if(m)return"setTouch"===d?b:p&&a.animatingTo===a.last?0:p?a.limit-(a.itemW+c.itemMargin)*a.move*a.animatingTo:a.animatingTo===a.last?a.limit:r;switch(d){case "setTotal":return p?(a.count-1-a.currentSlide+a.cloneOffset)*b:(a.currentSlide+a.cloneOffset)*b;case "setTouch":return b;
  case "jumpEnd":return p?b:a.count*b;case "jumpStart":return p?a.count*b:b;default:return b}}()+"px"}();a.transitions&&(k=q?"translate3d(0,"+k+",0)":"translate3d("+k+",0,0)",f=void 0!==f?f/1E3+"s":"0s",a.container.css("-"+a.pfx+"-transition-duration",f));a.args[a.prop]=k;(a.transitions||void 0===f)&&a.container.css(a.args)};a.setup=function(b){if(v)a.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===b&&(x?a.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+
  c.animationSpeed/1E3+"s ease",zIndex:1}).eq(a.currentSlide).css({opacity:1,zIndex:2}):a.slides.eq(a.currentSlide).fadeIn(c.animationSpeed,c.easing)),c.smoothHeight&&h.smoothHeight();else{if("init"===b&&(a.viewport=e('<div class="'+g+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(a).append(a.container),a.cloneCount=0,a.cloneOffset=0,p)){var d=e.makeArray(a.slides).reverse();a.slides=e(d);a.container.empty().append(a.slides)}c.animationLoop&&!m&&(a.cloneCount=2,a.cloneOffset=
  1,"init"!==b&&a.container.find(".clone").remove(),a.container.append(a.slides.first().clone().addClass("clone")).prepend(a.slides.last().clone().addClass("clone")));a.newSlides=e(c.selector,a);var f=p?a.count-1-a.currentSlide+a.cloneOffset:a.currentSlide+a.cloneOffset;q&&!m?(a.container.height(200*(a.count+a.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){a.newSlides.css({display:"block"});a.doMath();a.viewport.height(a.h);a.setProps(f*a.h,"init")},"init"===b?100:0)):
  (a.container.width(200*(a.count+a.cloneCount)+"%"),a.setProps(f*a.computedW,"init"),setTimeout(function(){a.doMath();a.newSlides.css({width:a.computedW,"float":"left",display:"block"});c.smoothHeight&&h.smoothHeight()},"init"===b?100:0))}m||a.slides.removeClass(g+"active-slide").eq(a.currentSlide).addClass(g+"active-slide")};a.doMath=function(){var b=a.slides.first(),d=c.itemMargin,f=c.minItems,k=c.maxItems;a.w=a.width();a.h=b.height();a.boxPadding=b.outerWidth()-b.width();m?(a.itemT=c.itemWidth+
  d,a.minW=f?f*a.itemT:a.w,a.maxW=k?k*a.itemT:a.w,a.itemW=a.minW>a.w?(a.w-d*f)/f:a.maxW<a.w?(a.w-d*k)/k:c.itemWidth>a.w?a.w:c.itemWidth,a.visible=Math.floor(a.w/(a.itemW+d)),a.move=0<c.move&&c.move<a.visible?c.move:a.visible,a.pagingCount=Math.ceil((a.count-a.visible)/a.move+1),a.last=a.pagingCount-1,a.limit=1===a.pagingCount?0:c.itemWidth>a.w?(a.itemW+2*d)*a.count-a.w-d:(a.itemW+d)*a.count-a.w-d):(a.itemW=a.w,a.pagingCount=a.count,a.last=a.count-1);a.computedW=a.itemW-a.boxPadding};a.update=function(b,
  d){a.doMath();m||(b<a.currentSlide?a.currentSlide+=1:b<=a.currentSlide&&0!==b&&--a.currentSlide,a.animatingTo=a.currentSlide);if(c.controlNav&&!a.manualControls)if("add"===d&&!m||a.pagingCount>a.controlNav.length)h.controlNav.update("add");else if("remove"===d&&!m||a.pagingCount<a.controlNav.length)m&&a.currentSlide>a.last&&(--a.currentSlide,--a.animatingTo),h.controlNav.update("remove",a.last);c.directionNav&&h.directionNav.update()};a.addSlide=function(b,d){var f=e(b);a.count+=1;a.last=a.count-
  1;q&&p?void 0!==d?a.slides.eq(a.count-d).after(f):a.container.prepend(f):void 0!==d?a.slides.eq(d).before(f):a.container.append(f);a.update(d,"add");a.slides=e(c.selector+":not(.clone)",a);a.setup();c.added(a)};a.removeSlide=function(b){var d=isNaN(b)?a.slides.index(e(b)):b;--a.count;a.last=a.count-1;isNaN(b)?e(b,a.slides).remove():q&&p?a.slides.eq(a.last).remove():a.slides.eq(b).remove();a.doMath();a.update(d,"remove");a.slides=e(c.selector+":not(.clone)",a);a.setup();c.removed(a)};h.init()};e.flexslider.defaults=
  {namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7E3,animationSpeed:600,initDelay:0,randomize:!1,pauseOnAction:!0,pauseOnHover:!1,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",
  itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};e.fn.flexslider=function(l){void 0===l&&(l={});if("object"===typeof l)return this.each(function(){var a=e(this),c=a.find(l.selector?l.selector:".slides > li");1===c.length?(c.fadeIn(400),l.start&&l.start(a)):void 0==a.data("flexslider")&&new e.flexslider(this,l)});var w=e(this).data("flexslider");switch(l){case "play":w.play();break;
  case "pause":w.pause();break;case "next":w.flexAnimate(w.getTarget("next"),!0);break;case "prev":case "previous":w.flexAnimate(w.getTarget("prev"),!0);break;default:"number"===typeof l&&w.flexAnimate(l,!0)}}})(jQuery);